{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import {\n    LLama as LLamaNode,\n    LLamaConfig,\n    LLamaArguments,\n} from \"@llama-node/core\";\n\nexport class LLama {\n    private llamaNode: LLamaNode;\n\n    constructor(config: LLamaConfig, enableLogger?: boolean) {\n        if (enableLogger) {\n            LLamaNode.enableLogger();\n        }\n        this.llamaNode = LLamaNode.create(config);\n    }\n\n    createCompletion = (\n        params: LLamaArguments,\n        callback: (data: { token: string; completed: boolean }) => void\n    ) => {\n        let completed = false;\n        return new Promise<boolean>((res, rej) => {\n            this.llamaNode.inference(params, (response) => {\n                switch (response.type) {\n                    case \"DATA\": {\n                        const data = {\n                            token: response.data.token,\n                            completed: !!response.data.completed,\n                        };\n                        if (data.completed) {\n                            completed = true;\n                        }\n                        callback(data);\n                        break;\n                    }\n                    case \"END\": {\n                        res(completed);\n                        break;\n                    }\n                    case \"ERROR\": {\n                        rej(response.message);\n                        break;\n                    }\n                }\n            });\n        });\n    };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIO;AAEA,IAAM,QAAN,MAAY;AAAA,EAGf,YAAY,QAAqB,cAAwB;AAOzD,4BAAmB,CACf,QACA,aACC;AACD,UAAI,YAAY;AAChB,aAAO,IAAI,QAAiB,CAAC,KAAK,QAAQ;AACtC,aAAK,UAAU,UAAU,QAAQ,CAAC,aAAa;AAC3C,kBAAQ,SAAS,MAAM;AAAA,YACnB,KAAK,QAAQ;AACT,oBAAM,OAAO;AAAA,gBACT,OAAO,SAAS,KAAK;AAAA,gBACrB,WAAW,CAAC,CAAC,SAAS,KAAK;AAAA,cAC/B;AACA,kBAAI,KAAK,WAAW;AAChB,4BAAY;AAAA,cAChB;AACA,uBAAS,IAAI;AACb;AAAA,YACJ;AAAA,YACA,KAAK,OAAO;AACR,kBAAI,SAAS;AACb;AAAA,YACJ;AAAA,YACA,KAAK,SAAS;AACV,kBAAI,SAAS,OAAO;AACpB;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ,CAAC;AAAA,MACL,CAAC;AAAA,IACL;AApCI,QAAI,cAAc;AACd,kBAAAA,MAAU,aAAa;AAAA,IAC3B;AACA,SAAK,YAAY,YAAAA,MAAU,OAAO,MAAM;AAAA,EAC5C;AAiCJ;","names":["LLamaNode"]}